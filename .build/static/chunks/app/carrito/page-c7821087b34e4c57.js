(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[707],{1556:function(e,a,s){Promise.resolve().then(s.bind(s,4888))},2660:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(9205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},4888:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return b}});var t=s(7437),r=s(2265),i=s(7552),n=s(1586),l=s(7648),d=s(3145),c=s(3287),o=s(2381),h=s(2449),x=s(2660),m=s(9205);let g=(0,m.Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),u=(0,m.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),p=(0,m.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),j=(0,m.Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var y=s(8997),f=s(770),v=s(3340),N=s(2880);function b(){let{cartItems:e,updateQuantity:a,removeFromCart:s,clearCart:m,getCartTotal:b}=(0,N.j)(),{toast:w}=(0,v.p)(),[k,z]=(0,r.useState)(!1),E=(e,a)=>{s(e,a),w({title:"Producto eliminado",description:"El producto se ha eliminado del carrito"})},C=async()=>{z(!0);try{let a=await fetch("/api/stripe/create-product-checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:e,origin:window.location.origin})}),s=await a.json();if(!a.ok)throw Error(s.error||"Error al procesar el pago");s.url&&(window.location.href=s.url)}catch(e){w({title:"Error",description:e.message||"No se pudo procesar el pago. Por favor, int\xe9ntalo de nuevo.",variant:"destructive"}),z(!1)}};return 0===e.length?(0,t.jsxs)("div",{className:"min-h-screen",children:[(0,t.jsx)(i.h,{}),(0,t.jsx)("main",{className:"section-padding bg-gradient-to-br from-white to-hogara-pink/5",children:(0,t.jsx)("div",{className:"container max-w-2xl text-center py-20",children:(0,t.jsxs)(c.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},children:[(0,t.jsx)("div",{className:"inline-flex items-center justify-center w-24 h-24 rounded-full bg-hogara-pink/20 mb-6",children:(0,t.jsx)(h.Z,{className:"w-12 h-12 text-hogara-gold"})}),(0,t.jsx)("h1",{className:"text-3xl font-heading font-medium text-hogara-gray mb-4",children:"Tu carrito est\xe1 vac\xedo"}),(0,t.jsx)("p",{className:"text-lg text-hogara-gray/70 mb-8",children:"Descubre nuestra colecci\xf3n y a\xf1ade tus productos favoritos"}),(0,t.jsx)(l.default,{href:"/tienda",children:(0,t.jsxs)(o.z,{size:"lg",className:"bg-hogara-gold hover:bg-hogara-gold/90",children:[(0,t.jsx)(h.Z,{className:"w-4 h-4 mr-2"}),"Ir a la tienda"]})})]})})}),(0,t.jsx)(n.$,{})]}):(0,t.jsxs)("div",{className:"min-h-screen",children:[(0,t.jsx)(i.h,{}),(0,t.jsx)("main",{className:"section-padding bg-gradient-to-br from-white to-hogara-pink/5",children:(0,t.jsxs)("div",{className:"container max-w-6xl",children:[(0,t.jsx)("div",{className:"mb-12",children:(0,t.jsxs)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[(0,t.jsxs)(l.default,{href:"/tienda",className:"inline-flex items-center text-hogara-gold hover:text-hogara-gold/80 mb-4",children:[(0,t.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),"Seguir comprando"]}),(0,t.jsx)("h1",{className:"text-4xl lg:text-5xl font-heading font-medium text-hogara-gray mb-4",children:"Tu Carrito"}),(0,t.jsxs)("p",{className:"text-lg text-hogara-gray/70",children:[e.length," ",1===e.length?"producto":"productos"," en tu carrito"]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[e.map((e,s)=>{let r=f.RB.find(a=>a.id===e.productId);if(!r)return null;let i=e.variantId?r.variants?.find(a=>a.id===e.variantId):null,n=i?i.price:r.price,l=i?`${r.name} - ${i.name}`:r.name;return(0,t.jsx)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1*s},className:"bg-white rounded-xl p-6 shadow-sm border border-hogara-gray/10",children:(0,t.jsxs)("div",{className:"flex gap-6",children:[(0,t.jsx)("div",{className:"relative w-24 h-24 flex-shrink-0 rounded-lg overflow-hidden bg-gray-100",children:(0,t.jsx)(d.default,{src:r.images[0],alt:r.name,fill:!0,className:"object-cover"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"font-heading text-lg font-medium text-hogara-gray mb-1 truncate",children:l}),(0,t.jsxs)("p",{className:"text-sm text-hogara-gray/60 mb-4",children:[n.toFixed(2),"€ \xd7 ",e.quantity]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(o.z,{size:"icon",variant:"outline",className:"w-8 h-8",onClick:()=>a(e.productId,e.variantId,-1),children:(0,t.jsx)(g,{className:"w-4 h-4"})}),(0,t.jsx)("span",{className:"w-8 text-center font-medium",children:e.quantity}),(0,t.jsx)(o.z,{size:"icon",variant:"outline",className:"w-8 h-8",onClick:()=>a(e.productId,e.variantId,1),children:(0,t.jsx)(u,{className:"w-4 h-4"})})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)("span",{className:"font-semibold text-hogara-gray",children:[(n*e.quantity).toFixed(2),"€"]}),(0,t.jsx)(o.z,{size:"icon",variant:"ghost",className:"text-red-500 hover:text-red-600 hover:bg-red-50",onClick:()=>E(e.productId,e.variantId),children:(0,t.jsx)(p,{className:"w-4 h-4"})})]})]})]})]})},`${e.productId}-${e.variantId||"default"}`)}),(0,t.jsxs)(o.z,{variant:"outline",size:"sm",className:"text-red-500 hover:text-red-600 hover:bg-red-50 border-red-200",onClick:()=>{m(),w({title:"Carrito vaciado",description:"Todos los productos han sido eliminados"})},children:[(0,t.jsx)(p,{className:"w-4 h-4 mr-2"}),"Vaciar carrito"]})]}),(0,t.jsx)("div",{className:"lg:col-span-1",children:(0,t.jsxs)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"bg-white rounded-xl p-6 shadow-sm border border-hogara-gray/10 sticky top-8",children:[(0,t.jsx)("h2",{className:"text-2xl font-heading font-medium text-hogara-gray mb-6",children:"Resumen"}),(0,t.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,t.jsxs)("div",{className:"flex justify-between text-hogara-gray/70",children:[(0,t.jsx)("span",{children:"Subtotal"}),(0,t.jsxs)("span",{children:[b().toFixed(2),"€"]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-hogara-gray/70",children:[(0,t.jsx)("span",{children:"Env\xedo"}),(0,t.jsx)("span",{children:"Calculado en el checkout"})]}),(0,t.jsx)("div",{className:"border-t border-hogara-gray/10 pt-4",children:(0,t.jsxs)("div",{className:"flex justify-between text-xl font-semibold text-hogara-gray",children:[(0,t.jsx)("span",{children:"Total"}),(0,t.jsxs)("span",{children:[b().toFixed(2),"€"]})]})})]}),(0,t.jsx)(o.z,{size:"lg",className:"w-full bg-hogara-gold hover:bg-hogara-gold/90 mb-4",onClick:C,disabled:k,children:k?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j,{className:"w-4 h-4 mr-2 animate-spin"}),"Procesando..."]}):"Proceder al pago"}),(0,t.jsx)(l.default,{href:"/tienda",children:(0,t.jsx)(o.z,{variant:"outline",size:"lg",className:"w-full",children:"Continuar comprando"})}),(0,t.jsxs)("div",{className:"mt-6 pt-6 border-t border-hogara-gray/10 space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center text-sm text-hogara-gray/70",children:[(0,t.jsx)(y.Z,{className:"w-4 h-4 mr-2 text-hogara-pink"}),"Env\xedo seguro y cuidado"]}),(0,t.jsxs)("div",{className:"flex items-center text-sm text-hogara-gray/70",children:[(0,t.jsx)(h.Z,{className:"w-4 h-4 mr-2 text-hogara-pink"}),"Embalaje artesanal"]})]})]})})]})]})}),(0,t.jsx)(n.$,{})]})}}},function(e){e.O(0,[244,237,951,971,117,744],function(){return e(e.s=1556)}),_N_E=e.O()}]);